{{ define "main" }}

<div class="container pt-3">

  {{/* --- 배너 이미지 --- */}}
  {{ $page := .Page }}
  {{ with $page.Params.banner }}
    {{ $image_path := printf "%s" (.image | default "*") }}
    {{ $image := "" }}
    {{ if strings.HasPrefix $image_path "media/" }}
      {{ $image = resources.Get $image_path }}
    {{ else }}
      {{ $image = $page.Resources.GetMatch $image_path }}
    {{ end }}
    {{ with $image }}
      <div class="banner" style="margin-bottom: 2rem;">
        <img src="{{ $image.RelPermalink }}" alt="{{ $page.Title }} Banner" style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 10px;">
      </div>
    {{ end }}
  {{ end }}

  {{/* --- 페이지 제목 --- */}}
  <h1 class="page-title text-center mb-3">{{ .Title }}</h1>
  {{ with .Content }}
    <div class="content mb-3 text-center"> {{ . }} </div>
  {{ end }}

  {{/* --- 페이지 목록 --- */}}
  <div class="isotope-container">
    {{/* 현재 _index 페이지 자체는 목록에서 제외 */}}
    {{ $currentPage := . }}
    {{ range where .Pages "Permalink" "!=" $currentPage.Permalink }} {{/* <--- 이 줄이 수정되었습니다 */}}
      {{ partial "views/card" (dict "item" .) }}
    {{ end }}
  </div>

</div>

{{ end }}